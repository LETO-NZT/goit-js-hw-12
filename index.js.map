{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["function init() {\n  const form = document.querySelector(\".form\");\n  const input = document.querySelector(\"input[name='search-query']\"); // исправлено здесь\n  const loadMoreBtn = document.querySelector(\".load-more\");\n\n  if (!form || !input) {\n    console.error(\"Не найдены необходимые элементы формы.\");\n    return;\n  }\n\n  let currentPage = 1;\n  let currentQuery = '';\n  const perPage = 15;\n  let totalHits = 0;\n\n  form.addEventListener(\"submit\", async event => {\n    event.preventDefault();\n    currentQuery = input.value.trim();\n    currentPage = 1;\n\n    if (!currentQuery) {\n      iziToast.warning({\n        message: \"Please enter a search query!\",\n        position: \"topRight\",\n      });\n      return;\n    }\n\n    clearGallery();\n    hideLoadMoreBtn();\n    showLoader();\n\n    try {\n      const response = await fetchImages(currentQuery, currentPage, perPage);\n      const images = response.images;\n      totalHits = response.total;\n\n      if (!images.length) {\n        iziToast.error({\n          message: \"Sorry, there are no images matching your search query. Please try again!\",\n          position: \"topRight\",\n        });\n        return;\n      }\n\n      renderImages(images);\n\n      if (totalHits > perPage) {\n        showLoadMoreBtn();\n      }\n    } catch (error) {\n      iziToast.error({\n        message: \"Something went wrong. Please try again later.\",\n        position: \"topRight\",\n      });\n    } finally {\n      hideLoader();\n      input.value = \"\";\n    }\n  });\n\n  loadMoreBtn.addEventListener(\"click\", async () => {\n    currentPage += 1;\n    showLoader(true);\n\n    try {\n      const response = await fetchImages(currentQuery, currentPage, perPage);\n      const images = response.images;\n\n      renderImages(images);\n      smoothScroll();\n\n      const imagesLoaded = currentPage * perPage;\n      if (imagesLoaded >= totalHits) {\n        iziToast.info({\n          message: \"We're sorry, but you've reached the end of search results.\",\n          position: \"topRight\",\n        });\n        hideLoadMoreBtn();\n      }\n    } catch (error) {\n      iziToast.error({\n        message: \"Error loading more images.\",\n        position: \"topRight\",\n      });\n    } finally {\n      hideLoader();\n    }\n  });\n\n  function showLoadMoreBtn() {\n    loadMoreBtn.hidden = false;\n  }\n\n  function hideLoadMoreBtn() {\n    loadMoreBtn.hidden = true;\n  }\n\n  function smoothScroll() {\n    const { height: cardHeight } = document\n      .querySelector(\".gallery\")\n      .firstElementChild.getBoundingClientRect();\n\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: \"smooth\",\n    });\n  }\n}\n\n// Запуск инициализации\ninit();\n"],"names":["init","form","input","loadMoreBtn","currentPage","currentQuery","perPage","totalHits","event","hideLoadMoreBtn","response","images","showLoadMoreBtn","smoothScroll","cardHeight"],"mappings":"ssBAAA,SAASA,GAAO,CACd,MAAMC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAQ,SAAS,cAAc,4BAA4B,EAC3DC,EAAc,SAAS,cAAc,YAAY,EAEvD,GAAI,CAACF,GAAQ,CAACC,EAAO,CACnB,QAAQ,MAAM,wCAAwC,EACtD,MACD,CAED,IAAIE,EAAc,EACdC,EAAe,GACnB,MAAMC,EAAU,GAChB,IAAIC,EAAY,EAEhBN,EAAK,iBAAiB,SAAU,MAAMO,GAAS,CAK7C,GAJAA,EAAM,eAAc,EACpBH,EAAeH,EAAM,MAAM,OAC3BE,EAAc,EAEV,CAACC,EAAc,CACjB,SAAS,QAAQ,CACf,QAAS,+BACT,SAAU,UAClB,CAAO,EACD,MACD,CAED,eACAI,IACA,aAEA,GAAI,CACF,MAAMC,EAAW,MAAM,YAAYL,EAAcD,EAAaE,CAAO,EAC/DK,EAASD,EAAS,OAGxB,GAFAH,EAAYG,EAAS,MAEjB,CAACC,EAAO,OAAQ,CAClB,SAAS,MAAM,CACb,QAAS,2EACT,SAAU,UACpB,CAAS,EACD,MACD,CAED,aAAaA,CAAM,EAEfJ,EAAYD,GACdM,GAEH,MAAe,CACd,SAAS,MAAM,CACb,QAAS,gDACT,SAAU,UAClB,CAAO,CACP,QAAc,CACR,aACAV,EAAM,MAAQ,EACf,CACL,CAAG,EAEDC,EAAY,iBAAiB,QAAS,SAAY,CAChDC,GAAe,EACf,WAAW,EAAI,EAEf,GAAI,CAEF,MAAMO,GADW,MAAM,YAAYN,EAAcD,EAAaE,CAAO,GAC7C,OAExB,aAAaK,CAAM,EACnBE,IAEqBT,EAAcE,GACfC,IAClB,SAAS,KAAK,CACZ,QAAS,6DACT,SAAU,UACpB,CAAS,EACDE,IAEH,MAAe,CACd,SAAS,MAAM,CACb,QAAS,6BACT,SAAU,UAClB,CAAO,CACP,QAAc,CACR,YACD,CACL,CAAG,EAED,SAASG,GAAkB,CACzBT,EAAY,OAAS,EACtB,CAED,SAASM,GAAkB,CACzBN,EAAY,OAAS,EACtB,CAED,SAASU,GAAe,CACtB,KAAM,CAAE,OAAQC,CAAU,EAAK,SAC5B,cAAc,UAAU,EACxB,kBAAkB,sBAAqB,EAE1C,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QAChB,CAAK,CACF,CACH,CAGAd,EAAM"}